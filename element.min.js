customElements.define("date-count",class extends HTMLElement{connectedCallback(){var e=(this.getAttribute("count")||"year,day,hour,minute,second").split(",").filter(e=>!this.hasAttribute("no"+e)),t=({create:e="div",id:t,append:n=[],...a})=>(this[t]=Object.assign(document.createElement(e),{id:t,part:t,...a}),this[t].append(...n),this[t]),n=(e,t,n)=>`${t}:${this.getAttribute(e+"-"+t)||`var(--date-count-${e}-${t},${n})`};`;this.attachShadow({mode:"open"}).append(t({create:"style",innerHTML:":host{display:inline-block;"+n("style","font","arial")+"}#event{"+n("event","color","#e3")+n("event","padding","0 2rem")+n("event","font-size","2.4rem")+n("event","text-align","center")+n("event","background","#fc0")+"}#counts{display:grid;grid:1fr/repeat("+e.length+",1fr);"+n("counts","color","#fff")+n("counts","font-size","2.4rem")+n("counts","text-align","center")+n("counts","background","#080")+"}[part$='label']{"+n("label","padding","0 1rem")+n("label","font-size","1.4rem")+n("label","text-transform","uppercase")+"}"}),t({id:"event",append:[t({create:"slot",innerHTML:this.getAttribute("event")||"Y2K38 Epochalypse"})]}),t({id:"counts",append:e.map(e=>t({id:e+"part",append:[t({id:e}),t({id:e+"label",innerHTML:new Intl.RelativeTimeFormat(this.getAttribute("format")||"en").formatToParts(2,e)[2].value})]}))})),count=setInterval(()=>{var t,n=new Date,a=new Date(this.getAttribute("date")||"2038-1-19 3:14:7"),r=a<n&&([n,a]=[a,n]),i=a-n,s={year:~~(i/31536e6)},o=0;for(t=n.getFullYear();t<a.getFullYear();t++)(t%4==0&&t%100!=0||t%400==0)&&(r?o--:o++);s.day=~~((i-=31536e6*s.year)/864e5)+o,s.hour=~~((i-=864e5*(s.day-o))/36e5),s.minute=~~((i-=36e5*s.hour)/6e4),s.second=~~((i-=6e4*s.minute)/1e3),e.map(e=>(this.setAttribute(e,s[e]),this[e].innerHTML=s[e])).every(e=>!e)&&(clearInterval(count),this.dispatchEvent(new Event(this.id)))},1e3)}});