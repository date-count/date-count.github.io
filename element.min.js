customElements.define("date-count",class extends HTMLElement{connectedCallback(){var e="years,days,hours,minutes,seconds".split(","),t=this.getAttribute("count")?.split(",")||e.filter((e=>!this.hasAttribute("no"+e))),n=t.map((e=>new Intl.RelativeTimeFormat(this.getAttribute("format")||"en").formatToParts(2,e)[2].value)),a=({create:e="div",id:t,append:n=[],...a})=>(this[t]=Object.assign(document.createElement(e),{id:t,part:t,...a}),this[t].append(...n),this[t]),s=(e,t,n)=>`${t}:${this.getAttribute(e+"-"+t)||`var(--date-count-${e}-${t},${n})`};`;this.attachShadow({mode:"open"}).append(a({create:"style",innerHTML:":host{display:inline-block;"+s("","font","arial")+"}#event{"+s("event","color","#000")+s("event","padding","0 1rem")+s("event","font-size","2.5rem")+s("event","text-align","center")+s("event","background","#fc0")+"}#counts{display:grid;grid:1fr/repeat("+t.length+",1fr);"+s("counts","color","#fff")+s("counts","font-size","2.5rem")+s("counts","text-align","center")+s("counts","background","#080")+"}[part$='label']{"+s("label","padding","0 1rem")+s("label","font-size","1.5rem")+s("label","text-transform","uppercase")+"}"}),a({id:"event",append:[a({create:"slot",innerHTML:this.getAttribute("event")||"Y2K38 Epochalypse"})]}),a({id:"counts",append:t.map((e=>a({id:e+"part",append:[a({id:e}),a({id:e+"label",innerHTML:n[t.indexOf(e)]})]})))})),e=setInterval((()=>{var n,a=new Date,s=new Date(this.getAttribute("date")||"2038-01-19"),r=s<a&&([a,s]=[s,a]),i=s-a,o={years:~~(i/31536e6)},l=0;for(n=a.getFullYear();n<s.getFullYear();n++)(n%4==0&&n%100!=0||n%400==0)&&(r?l--:l++);o.days=~~((i-=31536e6*o.years)/864e5)+l,o.hours=~~((i-=864e5*(o.days-l))/36e5),o.minutes=~~((i-=36e5*o.hours)/6e4),o.seconds=~~((i-=6e4*o.minutes)/1e3),t.map((e=>(this.setAttribute(e,o[e]),this[e].innerHTML=o[e]))).every((e=>!e))&&(clearInterval(e),this.dispatchEvent(new CustomEvent("date-count",{bubbles:1,composed:1})))}),1e3)}});