customElements.define("date-count",class extends HTMLElement{connectedCallback(){var e="year,day,hour,minute,second".split(","),t=this.getAttribute("count")?.split(",")||e.filter(e=>!this.hasAttribute("no"+e)),n=({create:e="div",id:t,append:n=[],...$})=>(this[t]=Object.assign(document.createElement(e),{id:t,part:t,...$}),this[t].append(...n),this[t]),$=(e,t,n)=>`${t}:${this.getAttribute(e+"-"+t)||`var(--date-count-${e}-${t},${n})`};`;this.attachShadow({mode:"open"}).append(n({create:"style",innerHTML:":host{display:inline-block;"+$("style","font","arial")+"}#event{"+$("event","color","#000")+$("event","padding","0 2rem")+$("event","font-size","2.4rem")+$("event","text-align","center")+$("event","background","#fc0")+"}#counts{display:grid;grid:1fr/repeat("+t.length+",1fr);"+$("counts","color","#fff")+$("counts","font-size","2.4rem")+$("counts","text-align","center")+$("counts","background","#080")+"}[part$='label']{"+$("label","padding","0 1rem")+$("label","font-size","1.4rem")+$("label","text-transform","uppercase")+"}"}),n({id:"event",append:[n({create:"slot",innerHTML:this.getAttribute("event")||"Y2K38 Epochalypse"})]}),n({id:"counts",append:t.map(e=>n({id:e+"part",append:[n({id:e}),n({id:e+"label",innerHTML:new Intl.RelativeTimeFormat(this.getAttribute("format")||"en").formatToParts(2,e)[2].value})]}))})),e=setInterval(()=>{var n,$=new Date,a=new Date(this.getAttribute("date")||"2038-1-19 3:14:7"),i=a<$&&([$,a]=[a,$]),r=a-$,s={year:~~(r/31536e6)},o=0;for(n=$.getFullYear();n<a.getFullYear();n++)(n%4==0&&n%100!=0||n%400==0)&&(i?o--:o++);s.day=~~((r-=31536e6*s.year)/864e5)+o,s.hour=~~((r-=(s.day-o)*864e5)/36e5),s.minute=~~((r-=36e5*s.hour)/6e4),s.second=~~((r-=6e4*s.minute)/1e3),t.map(e=>(this.setAttribute(e,s[e]),this[e].innerHTML=s[e])).every(e=>!e)&&(clearInterval(e),this.dispatchEvent(new Event(this.id)))},1e3)}});